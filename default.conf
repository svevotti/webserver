server {
	port					8080;
	server_name				localhost;
	root					/server_root;
	client_max_body_size	5M;
	keepalive_timeout		75;
	client_body_timeout		12;
	client_header_timeout	12;
	cgi_path				./cgi_bin;
	cgi_extension			.py;

	# specifies how the server should respond to requests for the root path (no path specified)
	location / {
		allow			GET;
		root			/server_root/public_html;
		index			index.html;
		content_type	text/html;
	}

	location /public_html {
		allow					POST GET DELETE;
		root					/server_root;
		limit_client_body_size	10M;
		content_type			text/html text/plain;
	}

	location /uploads {
		allow					POST GET DELETE;
		root					/server_root/public_html;
		limit_client_body_size	10M;
		content_type			text/html text/plain image/jpeg image/png;
	}

	location /success {
		allow					POST GET DELETE;
		root					/server_root/public_html;
		limit_client_body_size	10M;
		content_type			text/html text/plain image/jpeg image/png;
	}

	location /upload {
		allow					POST DELETE HEAD;
		root					/server_root;
		limit_client_body_size	10M;
		content_type			text/html text/plain image/jpeg image/png;
	}

	location /favicon.ico {
		allow					GET POST;
		root					/server_root/public_html;
	}

	#This needs to be checked, need to be done
	location /old-page {
		root					/server_root;
		redirect				/public_html;
	}

	# location /delete {
	#     allow DELETE;
	#     root /www/uploads;
	# }

	# CGI scripts (for dynamic content)
	location /cgi-bin/ {
		allow			POST;
		root			/www/cgi-bin;
		fastcgi_pass	backend;
		cgi_path		./cgi_bin/upload.py;
	}

	# Route to serve the error files (these files should exist at the specified locations)
	location /400.html {
		root	/server_root/errors;
		internal;
	}

	location /403.html {
		root	/www/errors;
		internal;
	}

	location /404.html {
		root	/server_root/errors;
		internal;
	}

	location /405.html {
		root	/www/errors;
		internal;
	}

	location /413.html {
		root	/server_root/errors;
		internal;
	}

	location /505.html {
		root	/server_root/errors;
		internal;
	}
}
